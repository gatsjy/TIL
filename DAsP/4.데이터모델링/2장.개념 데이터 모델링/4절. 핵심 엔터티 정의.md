4절. 핵심 엔터티 정의

1. 엔터티 정의의 요건

가. 엔터티 정의
- 관리하고자 하는 것인지 확인한다.
- 가로와 세로를 가진 면적인지 확인한다.
- 대상 개체 간의 동질성이 있는지 확인한다.
- 다른 개체와 확연히 구분되는 독립성을 가지는지 확인한다.
- 순수한 개체이거나 행위를 하는 행위 집합인지 확인한다.

나. 엔터티 정의 시 고려사항
- 관리하고자 하는 것인지 확인한다.
- 다른 개체와 확연히 구분되는 독립성을 가지는지 확인한다.
- 순수한 개체이거나 개체가 행위를 하는 행위 집합인지 확인한다.
- 특정 업무를 수행하는 과정에서 파생되는 엔터티는 데이터로서 안정성을 고려한다.
- 의미있고 직관적으로 이해할 수 있는 간단명료한 이름을 부여한다.
- 현업사용자와 공동작업을 통한 반복적인 검토 및 수정이 필요하다.

다. 엔터티(Entity) 파악 요령
- 업무와 관련해서 설명한 업무 기술서를 이용한다.
- 현업 담당자와의 인터뷰를 활용한다.
- 기존시스템에서 이미 구축되 었다면 기존 시스템의 산출물을 검토한다.
- DFD(Data Flow Diagram)을 통해 업무 분석을 진행하였다면 DFD의 Data Store을 활용한다.
- 현업의 업무를 직접 견학하고 인터뷰와 업무 기술서에서 누락된 정보가 있는지 검토한다.
- 현재 업무에 나타나지 않지만 BPR에 의해 업무를 재정의한 경우 관련 엔터티를 찾아내야 한다.

라. 엔터티(Entity) 작성 예

2. 의미상 주어 정의(본질 식별자)
: 인조 식별자가 가주어라고 한다면, 진주어는 해당 엔터티의 의미상의 주어를 말한다.
이를 우리는 본질 식별자라고 칭한다. 본질 식별자는 집합의 인스턴스가 생성되는 정확한 단위라고 할 수 있다.
즉, 집합의 의미가 명확하게 정의되지 않은 모호한 집합에 인위적인 유일한 이름만 가져다 붙인다고 해서 갑자기 집합의 명확해지지는 않는다.

3. 코드성 키 엔터티 모델링
: 코드성 엔터티를 개념 모델링 단계에서 모두 도출하게 되면, 추후 모델의 복잡성의 함정에 빠질 수 있다.
따라서, 다음과 같은 기준에 따라 도출하는 것이 좋다.
- 자식 엔터티를 가지는가?
- 자신만의 다양한 속성을 가질 것인가?
- 여러 엔터티에 관계를 맺을 것인가?
- 다양한 종류의 관계를 맺을 것인가?
-- 해당 엔터티가 다른 엔터티의 본질 식별자가 되고 있는지를 판단한다. 해당 엔터티로 인해 다른 엔터티의 존재종속의 문제가 발생한다면,
정말 볼품없는 엔터티라 하더라도 도출해야 한다.
-- 해당 엔터티에 단순한 코드명이나 코드의 의미에 대한 설명 외에 또 다른 속성을 가지는지 확인해야 한다. 엔터티가 이러한 속성을 가지고 있다는 것은 자기만의 확실한 사유재산이 있다는 것을 의미하므로 독립적인 개체 집합으로서 의의가 있다.
-- 관계 존재 여부를 확인해야 한다. 엔터티가 다양한 관계를 맺고 있다는 것은 활동성이 왕성하다는 것을 의미한다. 이러한 엔터티를 누락시킨다면 앞으로 정의해야 할 많은 관계도 같이 누락될 것이다.

4. 집합 순수성

가. 집합 순수성의 의미
: 순수한 본질 집합이 되어야 한다는 것은 사람, 상품 등과 같이 단위 사물을 정의한 개체 집합이 되든지, 입금, 계약 등과 같은 행위 집합이 되든지 간에 둘 중의 어느 하나가 되어야 한다는 것이다.
서로 결합된 형태면 관계에 해당한다.

나. 집합 순수성
예 : 납입자 같은 단어는 순수 본질 집합인 고객과 납입이 결합된 릴레이션이다.

다. 집합 순수성 적용 예외 사항
1) 관계의 엔터티화
- 릴레이션이 M:M이 되면 더 이상 관계로만 존재할 수 없기 때문에 엔터티로 바꾸게 된다. 이를 릴레이션 엔터티, 제휴 엔터티, 교차 엔터티 등으로 부른다.
2) 일부 집합 정의
- 전체 집합 중 일부의 집합만 엔터티로 정의하고자 할 때
- 금융 기관은 기관의 부분으로서 엔터티이고 수납기관은 관계일 뿐이다.
3) 배타적 관계 대체
- 여러 엔터티와 동일한 내용의 관계를 갖는 배타적 관계를 맺을 때 만약 배타적 관계의 변화 가능성이 높다면 별도의 엔터티를 구성한다.

5. 집합 동질성
가. 집합 동질성 의미
: 집합에 들어갈 개체들의 동일한 성질을 어디까지로 한정할 것인가를 결정하는 것이다.
나. 집합 동질성 부여의 예 (고객)
1) 사람의 집합이라고 규정한 경우 : 사람만이 집합이고 우리 상품과 구체적인 관계를 맺은 사람들만 존재하는 집합으로 정의했다는 특수성이 분명히 나타나야만 한다.
2) 사람 또는 법인이라고 규정한 경우 : 위의 이러한 집합들을 분명하게 포함시켰다는 것을 내포한다.

6. 엔터티 명칭
가. 적절한 엔터티 명칭
: 엔터티의 명칭을 정하는 것은 생각보다 매우 중요한 일임. 함축적인 의미를 담고 있어 설명하지 않아도 오해를 최소화 할 수 있어야 한다. 따라서 엔터티의 명칠을 정할 때는 실무자와 해당 분야의 의견을 종합하고 이를 구성원 간에 합의하는 것이 필요하다.

7. 서브타입
가. 서브타입 지정 의의
- 구체적인 부분 집합의 종류(서브타입)를 명시하는 것이다.
- 개체-관계 도표(ERD)를 입체적이고 구체적으로 작성하기 위해서는 집합의 부분집합을 표현해 주어야 한다.
- 실세계에서 동일한 것이다.
- 약간 다른 (추가적인) 속성이다.
- 서브타입(의사, 간호사, 기술직, 사무직)은 슈퍼타입(직원)의 부분집합이다.
- 서브타입에서 상호배타적인 다수의 부류(카테고리)가 형성될 수 있다.

나. 서브타입 지정 시 고려 사항
1) 교집합 허용 불가
2) 서브타입의 합이 전체 집합 : 반드시 이 규칙을 준수해야 한다.
3) 서브타입 표현의 기준 :
- 개별 속성을 가질 때
- 개별 관계를 가질 때
- 가독성을 증진시키고자 할 때

다. 서브타입 도출
1) 분류 속성 : 엔터티의 정보가 차별화되는 경우
2) 다수의 선택적 속성
3) 선택적 관계가 존재하는 경우 : 분할함으로써 관계가 필수적으로 변하는지 확인한다.
4) 도출절차
- 분류 속성을 확인한다. (엔터티의 발생이 차별화되는 경우)
- 분류 속성값에 의해 분류되는 서브타입을 파악한다.
- 분류 속성에 따라 필수적/선택적 분할을 정의한다.
- 서브타입별 속성을 할당한다.
- 슈퍼타입의 관계를 해당 서브타입에 정의한다.

라. 서브타입의 활용
1) 데이터 모델에 업무 규칙을 명확히 표현하여 업무를 정확히 이해하고, 속성 및 관계의 선택성을 제거한다.
2) 서브타입의 표현은 업무 규칙의 명확성과 표현의 복합성이라는 트레이드 오프관계가 적절히 조화를 이루어야 한다.

마. 서브타입의 이헤
- 서브타입은 인스턴스들의 집합인 엔터티라는 전체집합에서 일부의 인스턴스들만 모아놓은 부분집합이다.
- 하나의 엔터티에 무수히 많은 부분집합을 만들 수 있는데, 이렇게 만들어진 부분 집합들을 가리키는 용어가 서브타입에 해당한다.

바. 서브타입명 : 하나의 엔터티에서 만들어진 서브타입 각각에 부여한 이름을 말한다. 각각의 서브타입에 부여한 이름은 그 서브타입이 어떤 인스턴스들의
집합인지를 잘 나타낼 수 있는 용어로 붙인다. 가령, 고객 엔터티에서 개인고객 인스턴스만 모아 놓은 서브타입에는 "개인"이라는  서브타입명을 부여하고, 법인 인스턴스만 표현하기 위해 '법인'이라는 서브타입명을 부여할 수 있다.

8. 엔터티 통합과 분할
가. 엔터티의 독립성
: 새럽게 정의하고자 하는 엔터티가 앞서 정의해 준 어떤 엔터티에도 포함되지 않는 독립적인 집합인지를 확인해야 한다. 즉, 엔터티의 독립성을 확인해야 한다.

나. 엔터티 분할/통합
: 집합의 일부가 겹쳐있을 때 모양을 결정하는 방법?
- 어느 한 집합을 확장하여 나머지를 포함
- 교차된 부분을 어느 한쪽 집합에서만 가지도록 해 분리하는 방법
- 교차되는 부분이 있더라도 두 집합을 별개의 집합으로 간주하고 필요 시 관계를 맺는 방법


